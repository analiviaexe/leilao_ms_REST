<div *ngIf="!logado">
  <app-login (usuarioLogado)="onUsuarioLogado($event)"></app-login>
</div>

<div *ngIf="logado" style="padding: 20px;">
  <h1>Sistema de LeilÃµes - UsuÃ¡rio: {{ usuarioId }}</h1>
  
  <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 20px;">
    
    <!-- COLUNA 1: Criar LeilÃ£o e Dar Lance -->
    <div style="display: flex; flex-direction: column; gap: 20px;">
      <app-criar-leilao (leilaoCriado)="onLeilaoCriado()"></app-criar-leilao>
      <app-formulario-lance [usuarioId]="usuarioId" [leiloes]="leiloes"></app-formulario-lance>
    </div>
    
    <!-- COLUNA 2: LeilÃµes Ativos -->
    <div>
      <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
        <h3 style="margin: 0;">LeilÃµes Ativos</h3>
        <button (click)="carregarLeiloes()" style="padding: 5px 10px;">
          ðŸ”„ Atualizar
        </button>
      </div>
      <app-lista-leiloes [leiloes]="leiloes" [usuarioId]="usuarioId"></app-lista-leiloes>
    </div>
    
    <!-- COLUNA 3: Controle SSE + NotificaÃ§Ãµes -->
    <div style="display: flex; flex-direction: column; gap: 10px;">
      <div style="border: 2px solid #333; padding: 10px;">
        <h3 style="margin: 0 0 10px 0;">Controle SSE</h3>
        <div style="display: flex; flex-direction: column; gap: 5px;">
          <button (click)="conectarSSE()" [disabled]="sseConectado" style="padding: 8px;">
            Conectar NotificaÃ§Ãµes
          </button>
          <button (click)="desconectarSSE()" [disabled]="!sseConectado" style="padding: 8px;">
            Desconectar
          </button>
          <div style="margin-top: 5px; font-weight: bold; text-align: center;">
            {{ sseConectado ? 'ðŸŸ¢ Conectado' : 'ðŸ”´ Desconectado' }}
          </div>
        </div>
      </div>
      <app-notificacoes [notificacoes]="notificacoes" [conectado]="sseConectado"></app-notificacoes>
    </div>
    
  </div>
</div>
